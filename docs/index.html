<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ansible Galaxy Docker Compose</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #880E4F;
            --primary-dark: #560027;
            --primary-light: #BC477B;
            --secondary: #FF80AB;
            --background: #FAFAFA;
            --surface: #FFFFFF;
            --error: #D32F2F;
            --text-primary: #212121;
            --text-secondary: #757575;
            --divider: #BDBDBD;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--background);
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 60px 0;
            box-shadow: 0 4px 20px rgba(136, 14, 79, 0.3);
        }
        header h1 {
            font-size: 2.5em;
            font-weight: 500;
            margin-bottom: 10px;
        }
        header p {
            font-size: 1.2em;
            opacity: 0.9;
            font-weight: 300;
        }
        .header-controls {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 20px;
        }
        .lang-switch {
            display: flex;
            gap: 10px;
        }
        .lang-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-family: 'Roboto', sans-serif;
            font-size: 0.9em;
            transition: all 0.2s;
        }
        .lang-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        .lang-btn.active {
            background: white;
            color: var(--primary);
        }
        .badge {
            display: inline-block;
            background: rgba(255,255,255,0.15);
            padding: 8px 20px;
            border-radius: 20px;
            margin: 5px;
            font-weight: 300;
        }
        .content {
            background: var(--surface);
            border-radius: 8px;
            padding: 40px;
            margin: -30px auto 40px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        .section {
            margin-bottom: 40px;
        }
        .section h2 {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            padding-bottom: 10px;
            margin-bottom: 25px;
            font-weight: 500;
        }
        .section h3 {
            color: var(--primary-dark);
            margin: 20px 0 15px;
            font-weight: 500;
        }
        .services {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .service-card {
            background: linear-gradient(135deg, #f8f8f8 0%, #f0f0f0 100%);
            padding: 25px;
            border-radius: 8px;
            border-left: 5px solid var(--primary);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .service-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(136, 14, 79, 0.2);
        }
        .service-card h3 {
            color: var(--primary-dark);
            margin-bottom: 10px;
            font-weight: 500;
        }
        .service-card p {
            color: var(--text-secondary);
            font-size: 0.95em;
        }
        .code {
            background: #263238;
            color: #ECEFF1;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9em;
            line-height: 1.8;
            margin: 15px 0;
        }
        .code-comment { color: #6A9955; }
        .code-string { color: #CE9178; }
        .code-keyword { color: #569CD6; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: var(--surface);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--divider);
        }
        th {
            background: var(--primary);
            color: white;
            font-weight: 500;
        }
        tr:hover {
            background: #F5F5F5;
        }
        td:first-child {
            font-weight: 500;
            color: var(--primary-dark);
        }
        .config-section {
            background: #F5F5F5;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .config-section h3 {
            color: var(--primary);
            margin-bottom: 15px;
        }
        footer {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
            background: var(--primary-dark);
            color: white;
        }
        footer a {
            color: var(--secondary);
        }
        .nav-tabs {
            display: flex;
            border-bottom: 2px solid var(--divider);
            margin-bottom: 20px;
        }
        .nav-tab {
            padding: 15px 30px;
            cursor: pointer;
            color: var(--text-secondary);
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }
        .nav-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            font-weight: 500;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .example-box {
            background: #E8F5E9;
            border-left: 4px solid #4CAF50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        .warning-box {
            background: #FFF3E0;
            border-left: 4px solid #FF9800;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        .info-box {
            background: #E3F2FD;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-controls">
                <div class="lang-switch">
                    <button class="lang-btn" data-lang="en">English</button>
                    <button class="lang-btn" data-lang="zh">中文</button>
                </div>
            </div>
            <h1 data-i18n="title">Ansible Galaxy Docker Compose</h1>
            <p data-i18n="subtitle">Native Docker Compose configuration for local Galaxy server</p>
            <div style="margin-top: 25px;">
                <span class="badge">PostgreSQL 15</span>
                <span class="badge">Redis 7</span>
                <span class="badge">Galaxy NG</span>
                <span class="badge">Material Design</span>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="content">
            <div class="section">
                <h2 data-i18n="services">Services</h2>
                <div class="services">
                    <div class="service-card">
                        <h3 data-i18n="webUi">Galaxy Web UI</h3>
                        <p>Web interface at <strong>http://localhost:8080</strong></p>
                    </div>
                    <div class="service-card">
                        <h3 data-i18n="api">Galaxy API</h3>
                        <p>REST API at <strong>http://localhost:8000/api/galaxy/</strong></p>
                    </div>
                    <div class="service-card">
                        <h3 data-i18n="content">Galaxy Content</h3>
                        <p>Content service at <strong>http://localhost:24816</strong></p>
                    </div>
                    <div class="service-card">
                        <h3>PostgreSQL</h3>
                        <p>Database at <strong>localhost:5432</strong></p>
                    </div>
                    <div class="service-card">
                        <h3>Redis</h3>
                        <p>Cache at <strong>localhost:6379</strong></p>
                    </div>
                    <div class="service-card">
                        <h3 data-i18n="worker">Galaxy Worker</h3>
                        <p data-i18n="workerDesc">Background task worker (scalable)</p>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 data-i18n="quickStart">Quick Start</h2>
                <div class="code">
<pre><span class="code-comment"># Clone and setup</span>
<span class="code-keyword">git</span> clone https://github.com/AndrewDi/ansible-galaxy-compose.git
<span class="code-keyword">cd</span> ansible-galaxy-compose

<span class="code-comment"># Copy environment file</span>
<span class="code-keyword">cp</span> .env.example .env

<span class="code-comment"># Create certificates directory</span>
<span class="code-keyword">mkdir</span> -p certs
python3 -c <span class="code-string">"import os; print(os.urandom(32).hex())"</span> > certs/database_fields.symmetric.key
<span class="code-keyword">chmod</span> 600 certs/database_fields.symmetric.key

<span class="code-comment"># Start services</span>
docker compose up -d

<span class="code-comment"># Check status</span>
docker compose ps</pre>
                </div>
            </div>

            <div class="section">
                <h2 data-i18n="defaultPorts">Default Ports</h2>
                <table>
                    <tr>
                        <th data-i18n="service">Service</th>
                        <th>Port</th>
                        <th>URL</th>
                    </tr>
                    <tr>
                        <td>Galaxy Web</td>
                        <td>8080</td>
                        <td>http://localhost:8080</td>
                    </tr>
                    <tr>
                        <td>Galaxy API</td>
                        <td>8000</td>
                        <td>http://localhost:8000/api/galaxy/</td>
                    </tr>
                    <tr>
                        <td>Galaxy Content</td>
                        <td>24816</td>
                        <td>http://localhost:24816/pulp/content/</td>
                    </tr>
                    <tr>
                        <td>PostgreSQL</td>
                        <td>5432</td>
                        <td>localhost:5432</td>
                    </tr>
                    <tr>
                        <td>Redis</td>
                        <td>6379</td>
                        <td>localhost:6379</td>
                    </tr>
                </table>
            </div>

            <div class="section">
                <h2 data-i18n="defaultCredentials">Default Credentials</h2>
                <div class="info-box">
                    <p><strong data-i18n="username">Username:</strong> admin</p>
                    <p><strong data-i18n="password">Password:</strong> admin</p>
                </div>
            </div>

            <div class="section">
                <h2 data-i18n="configFiles">Configuration Files</h2>
                <div class="nav-tabs">
                    <div class="nav-tab active" onclick="switchTab('env')" data-i18n="envVars">.env Variables</div>
                    <div class="nav-tab" onclick="switchTab('settings')" data-i18n="settingsPy">settings.py</div>
                </div>
                
                <div id="env" class="tab-content active">
                    <div class="config-section">
                        <h3 data-i18n="dbSettings">Database Settings</h3>
                        <table>
                            <tr><td>POSTGRESQL_USER</td><td>galaxy</td><td data-i18n="dbUser">Database username</td></tr>
                            <tr><td>POSTGRESQL_PASSWORD</td><td>galaxy</td><td data-i18n="dbPass">Database password</td></tr>
                            <tr><td>POSTGRESQL_DATABASE</td><td>galaxy</td><td data-i18n="dbName">Database name</td></tr>
                            <tr><td>POSTGRESQL_HOST</td><td>postgres</td><td data-i18n="dbHost">Database host</td></tr>
                            <tr><td>POSTGRESQL_PORT</td><td>5432</td><td data-i18n="dbPort">Database port</td></tr>
                        </table>
                    </div>
                    
                    <div class="config-section">
                        <h3 data-i18n="redisSettings">Redis Settings</h3>
                        <table>
                            <tr><td>REDIS_HOST</td><td>redis</td><td data-i18n="redisHost">Redis host</td></tr>
                            <tr><td>REDIS_PORT</td><td>6379</td><td data-i18n="redisPort">Redis port</td></tr>
                            <tr><td>REDIS_PASSWORD</td><td>galaxy</td><td data-i18n="redisPass">Redis password</td></tr>
                        </table>
                    </div>
                    
                    <div class="config-section">
                        <h3 data-i18n="adminSettings">Galaxy Admin Settings</h3>
                        <table>
                            <tr><td>GALAXY_ADMIN_USER</td><td>admin</td><td data-i18n="adminUser">Admin username</td></tr>
                            <tr><td>GALAXY_ADMIN_PASSWORD</td><td>admin</td><td data-i18n="adminPass">Admin password</td></tr>
                        </table>
                    </div>
                    
                    <div class="config-section">
                        <h3 data-i18n="apiSettings">API Settings</h3>
                        <table>
                            <tr><td>GALAXY_API_HOSTNAME</td><td>http://galaxy-web.orb.local</td><td data-i18n="apiHost">Galaxy API hostname</td></tr>
                            <tr><td>GALAXY_CONTENT_HOSTNAME</td><td>http://galaxy-web.orb.local</td><td data-i18n="contentHost">Content hostname</td></tr>
                            <tr><td>CONTENT_ORIGIN</td><td>http://galaxy-web.orb.local</td><td data-i18n="contentOrigin">Content origin URL</td></tr>
                            <tr><td>GALAXY_API_PATH_PREFIX</td><td>api/galaxy</td><td data-i18n="apiPrefix">API path prefix</td></tr>
                        </table>
                    </div>
                    
                    <div class="config-section">
                        <h3 data-i18n="featureFlags">Feature Flags</h3>
                        <table>
                            <tr><td>GALAXY_REQUIRE_CONTENT_APPROVAL</td><td>True</td><td data-i18n="requireApproval">Require approval before publishing</td></tr>
                            <tr><td>GALAXY_ENABLE_ANONYMOUS_ACCESS</td><td>True</td><td data-i18n="anonAccess">Allow anonymous access</td></tr>
                            <tr><td>GALAXY_ENABLE_UNAUTHENTICATED_COLLECTION_DOWNLOAD</td><td>True</td><td data-i18n="anonDownload">Allow anonymous downloads</td></tr>
                            <tr><td>GALAXY_ENABLE_UNAUTHENTICATED_COLLECTION_ACCESS</td><td>True</td><td data-i18n="anonCollection">Allow anonymous collection access</td></tr>
                            <tr><td>EE_ENABLED</td><td>False</td><td data-i18n="eeEnabled">Enable Execution Environments</td></tr>
                            <tr><td>GALAXY_ENABLE_LEGACY_ROLES</td><td>True</td><td data-i18n="legacyRoles">Enable legacy roles support</td></tr>
                        </table>
                    </div>
                    
                    <div class="config-section">
                        <h3 data-i18n="workerScaling">Worker Scaling</h3>
                        <table>
                            <tr><td>WORKER_REPLICAS</td><td>1</td><td data-i18n="workerReplicas">Number of worker replicas</td></tr>
                        </table>
                    </div>
                </div>
                
                <div id="settings" class="tab-content">
                    <div class="config-section">
                        <h3 data-i18n="database">Database (DATABASES)</h3>
                        <table>
                            <tr><td>ENGINE</td><td>django.db.backends.postgresql</td><td data-i18n="dbEngine">Database engine</td></tr>
                            <tr><td>NAME</td><td>galaxy</td><td data-i18n="dbName">Database name</td></tr>
                            <tr><td>USER</td><td>galaxy</td><td data-i18n="dbUser">Database user</td></tr>
                            <tr><td>PASSWORD</td><td>galaxy</td><td data-i18n="dbPass">Database password</td></tr>
                            <tr><td>HOST</td><td>postgres</td><td data-i18n="dbHost">Database host</td></tr>
                            <tr><td>PORT</td><td>5432</td><td data-i18n="dbPort">Database port</td></tr>
                            <tr><td>CONN_MAX_AGE</td><td>0</td><td data-i18n="connMaxAge">Connection lifetime (seconds)</td></tr>
                        </table>
                    </div>
                    
                    <div class="config-section">
                        <h3 data-i18n="redisCache">Redis Cache</h3>
                        <table>
                            <tr><td>REDIS_PASSWORD</td><td>galaxy</td><td data-i18n="redisPass">Redis password</td></tr>
                            <tr><td>REDIS_HOST</td><td>redis</td><td data-i18n="redisHost">Redis host</td></tr>
                            <tr><td>REDIS_PORT</td><td>6379</td><td data-i18n="redisPort">Redis port</td></tr>
                            <tr><td>CACHE_URL</td><td>redis://:galaxy@redis:6379/0</td><td data-i18n="cacheUrl">Redis connection URL</td></tr>
                        </table>
                    </div>
                    
                    <div class="config-section">
                        <h3 data-i18n="security">Security</h3>
                        <table>
                            <tr><td>SECRET_KEY</td><td>(from PULP_SECRET_KEY)</td><td data-i18n="secretKey">Django secret key</td></tr>
                            <tr><td>ALLOWED_HOSTS</td><td>*</td><td data-i18n="allowedHosts">Allowed host patterns</td></tr>
                        </table>
                    </div>
                    
                    <div class="config-section">
                        <h3 data-i18n="storage">Storage</h3>
                        <table>
                            <tr><td>FILE_UPLOAD_MAX_MEMORY_SIZE</td><td>104857600 (100MB)</td><td data-i18n="fileUpload">Max file size in memory</td></tr>
                            <tr><td>DATA_UPLOAD_MAX_MEMORY_SIZE</td><td>524288000 (500MB)</td><td data-i18n="dataUpload">Max data upload size</td></tr>
                        </table>
                    </div>
                    
                    <div class="config-section">
                        <h3 data-i18n="galaxySettings">Galaxy Settings</h3>
                        <table>
                            <tr><td>GALAXY_API_DEFAULT_DISTRIBUTION_BASE_PATH</td><td>published</td><td data-i18n="distPath">Default distribution path</td></tr>
                            <tr><td>GALAXY_API_STAGING_DISTRIBUTION_BASE_PATH</td><td>staging</td><td data-i18n="stagingPath">Staging distribution path</td></tr>
                            <tr><td>ANSIBLE_API_HOSTNAME</td><td>(from GALAXY_API_HOSTNAME)</td><td data-i18n="ansibleApi">API hostname</td></tr>
                            <tr><td>X_PULP_CONTENT_HOST</td><td>galaxy-content</td><td data-i18n="pulpContentHost">Content host</td></tr>
                            <tr><td>X_PULP_CONTENT_PORT</td><td>24816</td><td data-i18n="pulpContentPort">Content port</td></tr>
                        </table>
                    </div>
                    
                    <div class="config-section">
                        <h3 data-i18n="featureFlags">Feature Flags</h3>
                        <table>
                            <tr><td>GALAXY_ENABLE_ANONYMOUS_ACCESS</td><td>True</td><td data-i18n="anonAccess">Enable anonymous access</td></tr>
                            <tr><td>GALAXY_ENABLE_UNAUTHENTICATED_COLLECTION_DOWNLOAD</td><td>True</td><td data-i18n="anonDownload">Allow unauthenticated downloads</td></tr>
                            <tr><td>GALAXY_ENABLE_UNAUTHENTICATED_COLLECTION_ACCESS</td><td>True</td><td data-i18n="anonCollection">Allow unauthenticated collection access</td></tr>
                            <tr><td>GALAXY_REQUIRE_CONTENT_APPROVAL</td><td>False</td><td data-i18n="requireApproval">Require content approval</td></tr>
                            <tr><td>GALAXY_ENABLE_LEGACY_ROLES</td><td>True</td><td data-i18n="legacyRoles">Enable legacy roles</td></tr>
                            <tr><td>GALAXY_DYNAMIC_SETTINGS</td><td>True</td><td data-i18n="dynamicSettings">Enable dynamic settings</td></tr>
                            <tr><td>EE_ENABLED</td><td>False</td><td data-i18n="eeEnabled">Enable Execution Environments</td></tr>
                        </table>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 data-i18n="ansibleCmd">ansible-galaxy Command Reference</h2>
                
                <h3 data-i18n="collectionCmd">Collection Commands</h3>
                <div class="code">
<pre><span class="code-comment"># Install a collection from Galaxy</span>
ansible-galaxy collection install namespace.collection

<span class="code-comment"># Install specific version</span>
ansible-galaxy collection install namespace.collection:1.0.0

<span class="code-comment"># Install from local file</span>
ansible-galaxy collection install namespace-collection-1.0.0.tar.gz

<span class="code-comment"># Install from custom server</span>
ansible-galaxy collection install namespace.collection --server=http://localhost:8000

<span class="code-comment"># List installed collections</span>
ansible-galaxy collection list

<span class="code-comment"># Build a collection from source</span>
ansible-galaxy collection build

<span class="code-comment"># Publish to Galaxy server</span>
ansible-galaxy collection publish namespace-collection-1.0.0.tar.gz

<span class="code-comment"># Publish to custom server</span>
ansible-galaxy collection publish namespace-collection-1.0.0.tar.gz \
  --server=http://localhost:8000 \
  --api-key=YOUR_API_KEY</pre>
                </div>
                
                <h3 data-i18n="roleCmd">Role Commands</h3>
                <div class="code">
<pre><span class="code-comment"># Install a role from Galaxy</span>
ansible-galaxy role install namespace.role_name

<span class="code-comment"># Install specific version</span>
ansible-galaxy role install namespace.role_name,1.2.0

<span class="code-comment"># List installed roles</span>
ansible-galaxy role list

<span class="code-comment"># Remove a role</span>
ansible-galaxy role remove namespace.role_name</pre>
                </div>
                
                <h3 data-i18n="serverCmd">Galaxy Server Commands</h3>
                <div class="code">
<pre><span class="code-comment"># Login to Galaxy</span>
ansible-galaxy login

<span class="code-comment"># Display Galaxy server status</span>
ansible-galaxy server status

<span class="code-comment"># List available servers</span>
ansible-galaxy server list</pre>
                </div>
                
                <h3 data-i18n="configCmd">Configuration</h3>
                <div class="code">
<pre><span class="code-comment"># Display current configuration</span>
ansible-galaxy config view

<span class="code-comment"># Get specific config value</span>
ansible-galaxy config server_list

<span class="code-comment"># Set config value (requires Ansible 2.16+)</span>
ansible-galaxy config server_list.test.server_url http://localhost:8000</pre>
                </div>
                
                <div class="example-box">
                    <strong data-i18n="fullWorkflow">Example: Full Workflow</strong>
                    <pre style="margin-top: 10px;">
<span class="code-comment"># 1. Build collection</span>
ansible-galaxy collection build

<span class="code-comment"># 2. Publish to local Galaxy server</span>
ansible-galaxy collection publish galaxy_service-1.0.0.tar.gz \
  --server=http://localhost:8000 \
  --api-key=YOUR_API_KEY

<span class="code-comment"># 3. Install collection</span>
ansible-galaxy collection install galaxy_service.galaxy_service \
  --server=http://localhost:8000

<span class="code-comment"># 4. Use in playbook</span>
ansible-playbook my_playbook.yml</pre>
                </div>
            </div>

            <div class="section">
                <h2 data-i18n="storageVolumes">Storage Volumes</h2>
                <table>
                    <tr>
                        <th data-i18n="volume">Volume</th>
                        <th data-i18n="description">Description</th>
                    </tr>
                    <tr>
                        <td>postgres_data</td>
                        <td data-i18n="postgresData">PostgreSQL database</td>
                    </tr>
                    <tr>
                        <td>galaxy_api_data</td>
                        <td data-i18n="galaxyData">Galaxy artifacts, uploads, and shared data</td>
                    </tr>
                </table>
            </div>

            <div class="section">
                <h2 data-i18n="githubActions">GitHub Actions</h2>
                <p data-i18n="githubActionsDesc">This project includes automated workflows:</p>
                <ul style="margin: 15px 0; padding-left: 20px;">
                    <li><strong>CI</strong> - <span data-i18n="ciDesc">Continuous integration testing</span></li>
                    <li><strong>Release</strong> - <span data-i18n="releaseDesc">Build and publish Galaxy collection</span></li>
                    <li><strong>Scale Test</strong> - <span data-i18n="scaleDesc">Test worker scaling capabilities</span></li>
                    <li><strong>Pages</strong> - <span data-i18n="pagesDesc">Deploy documentation</span></li>
                </ul>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p data-i18n="basedOn">Based on <a href="https://github.com/ansible/galaxy-operator" target="_blank">galaxy-operator</a></p>
            <p>&copy; 2026 Ansible Galaxy Compose</p>
        </div>
    </footer>

    <script>
        const translations = {
            en: {
                title: "Ansible Galaxy Docker Compose",
                subtitle: "Native Docker Compose configuration for local Galaxy server",
                services: "Services",
                webUi: "Galaxy Web UI",
                api: "Galaxy API",
                content: "Galaxy Content",
                worker: "Galaxy Worker",
                workerDesc: "Background task worker (scalable)",
                quickStart: "Quick Start",
                defaultPorts: "Default Ports",
                service: "Service",
                defaultCredentials: "Default Credentials",
                username: "Username:",
                password: "Password:",
                configFiles: "Configuration Files",
                envVars: ".env Variables",
                settingsPy: "settings.py",
                dbSettings: "Database Settings",
                dbUser: "Database username",
                dbPass: "Database password",
                dbName: "Database name",
                dbHost: "Database host",
                dbPort: "Database port",
                redisSettings: "Redis Settings",
                redisHost: "Redis host",
                redisPort: "Redis port",
                redisPass: "Redis password",
                adminSettings: "Galaxy Admin Settings",
                adminUser: "Admin username",
                adminPass: "Admin password",
                apiSettings: "API Settings",
                apiHost: "Galaxy API hostname",
                contentHost: "Content hostname",
                contentOrigin: "Content origin URL",
                apiPrefix: "API path prefix",
                featureFlags: "Feature Flags",
                requireApproval: "Require approval before publishing",
                anonAccess: "Allow anonymous access",
                anonDownload: "Allow anonymous downloads",
                anonCollection: "Allow anonymous collection access",
                eeEnabled: "Enable Execution Environments",
                legacyRoles: "Enable legacy roles support",
                workerScaling: "Worker Scaling",
                workerReplicas: "Number of worker replicas",
                database: "Database (DATABASES)",
                dbEngine: "Database engine",
                connMaxAge: "Connection lifetime (seconds)",
                redisCache: "Redis Cache",
                cacheUrl: "Redis connection URL",
                security: "Security",
                secretKey: "Django secret key",
                allowedHosts: "Allowed host patterns",
                storage: "Storage",
                fileUpload: "Max file size in memory",
                dataUpload: "Max data upload size",
                galaxySettings: "Galaxy Settings",
                distPath: "Default distribution path",
                stagingPath: "Staging distribution path",
                ansibleApi: "API hostname",
                pulpContentHost: "Content host",
                pulpContentPort: "Content port",
                ansibleCmd: "ansible-galaxy Command Reference",
                collectionCmd: "Collection Commands",
                roleCmd: "Role Commands",
                serverCmd: "Galaxy Server Commands",
                configCmd: "Configuration",
                fullWorkflow: "Example: Full Workflow",
                storageVolumes: "Storage Volumes",
                volume: "Volume",
                description: "Description",
                postgresData: "PostgreSQL database",
                galaxyData: "Galaxy artifacts, uploads, and shared data",
                githubActions: "GitHub Actions",
                githubActionsDesc: "This project includes automated workflows:",
                ciDesc: "Continuous integration testing",
                releaseDesc: "Build and publish Galaxy collection",
                scaleDesc: "Test worker scaling capabilities",
                pagesDesc: "Deploy documentation",
                basedOn: "Based on"
            },
            zh: {
                title: "Ansible Galaxy Docker Compose",
                subtitle: "本地 Galaxy 服务器的原生 Docker Compose 配置",
                services: "服务组件",
                webUi: "Galaxy Web UI",
                api: "Galaxy API",
                content: "Galaxy Content",
                worker: "Galaxy Worker",
                workerDesc: "后台任务工作节点（可扩展）",
                quickStart: "快速开始",
                defaultPorts: "默认端口",
                service: "服务",
                defaultCredentials: "默认凭证",
                username: "用户名:",
                password: "密码:",
                configFiles: "配置文件",
                envVars: ".env 变量",
                settingsPy: "settings.py",
                dbSettings: "数据库设置",
                dbUser: "数据库用户名",
                dbPass: "数据库密码",
                dbName: "数据库名称",
                dbHost: "数据库主机",
                dbPort: "数据库端口",
                redisSettings: "Redis 设置",
                redisHost: "Redis 主机",
                redisPort: "Redis 端口",
                redisPass: "Redis 密码",
                adminSettings: "Galaxy 管理员设置",
                adminUser: "管理员用户名",
                adminPass: "管理员密码",
                apiSettings: "API 设置",
                apiHost: "Galaxy API 主机名",
                contentHost: "Content 主机名",
                contentOrigin: "Content 原始 URL",
                apiPrefix: "API 路径前缀",
                featureFlags: "功能开关",
                requireApproval: "发布前需要审批",
                anonAccess: "允许匿名访问",
                anonDownload: "允许匿名下载",
                anonCollection: "允许匿名访问集合",
                eeEnabled: "启用执行环境",
                legacyRoles: "启用传统角色支持",
                workerScaling: "Worker 扩展",
                workerReplicas: "Worker 副本数量",
                database: "数据库 (DATABASES)",
                dbEngine: "数据库引擎",
                connMaxAge: "连接生命周期（秒）",
                redisCache: "Redis 缓存",
                cacheUrl: "Redis 连接 URL",
                security: "安全设置",
                secretKey: "Django 密钥",
                allowedHosts: "允许的主机模式",
                storage: "存储",
                fileUpload: "内存中最大文件大小",
                dataUpload: "最大数据上传大小",
                galaxySettings: "Galaxy 设置",
                distPath: "默认分发路径",
                stagingPath: "预发布分发路径",
                ansibleApi: "API 主机名",
                pulpContentHost: "Content 主机",
                pulpContentPort: "Content 端口",
                ansibleCmd: "ansible-galaxy 命令参考",
                collectionCmd: "集合命令",
                roleCmd: "角色命令",
                serverCmd: "Galaxy 服务器命令",
                configCmd: "配置",
                fullWorkflow: "示例：完整工作流",
                storageVolumes: "存储卷",
                volume: "卷",
                description: "描述",
                postgresData: "PostgreSQL 数据库",
                galaxyData: "Galaxy 制品、上传文件及共享数据",
                githubActions: "GitHub Actions",
                githubActionsDesc: "本项目包含以下自动化工作流：",
                ciDesc: "持续集成测试",
                releaseDesc: "构建和发布 Galaxy 集合",
                scaleDesc: "测试 Worker 扩展能力",
                pagesDesc: "部署文档",
                basedOn: "基于"
            }
        };

        let currentLang = 'en';

        function setLanguage(lang) {
            currentLang = lang;
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });
            
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-lang') === lang) {
                    btn.classList.add('active');
                }
            });
            
            document.documentElement.lang = lang;
            localStorage.setItem('galaxy-docs-lang', lang);
        }

        function detectBrowserLanguage() {
            const savedLang = localStorage.getItem('galaxy-docs-lang');
            if (savedLang) {
                return savedLang;
            }
            
            const browserLang = navigator.language || navigator.userLanguage;
            if (browserLang.startsWith('zh')) {
                return 'zh';
            }
            return 'en';
        }

        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                setLanguage(btn.getAttribute('data-lang'));
            });
        });

        const initialLang = detectBrowserLanguage();
        setLanguage(initialLang);
    </script>
</body>
</html>
